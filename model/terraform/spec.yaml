kind: Application
metadata:
  name: Terraform
  group: terraform.argo.cisco.com
  version: v1
spec:
  platforms:
    - platform: kind
      kafka:
        addresses: 
          - kafka-svc:9092
      mongo:
        address: mongo-svc:27017
      directory:
        service: clusterd
        endpoint: clusterd-directory-notifier
        databaseName: clusterd-directory
  services:
    - service: clusterd
      restPort: 0.0.0.0:8090
      endpoint: clusterd-topic
      databaseName: clusterd
      managedResources:
        - managedResource: terraform.argo.cisco.com/v1.Cluster
          endpoint: cluster-topic
        - managedResource: terraform.argo.cisco.com/v1.ClusterMember
          endpoint: cluster-topic
    - service: node-manager
      endpoint: node-manager-topic
      restPort: 0.0.0.0:8089
      databaseName: nodemgr
      managedResources:
        - managedResource: terraform.argo.cisco.com/v1.Node
          endpoint: node-topic
        - managedResource: book.aci.cisco.com/v1.Book
          endpoint: node-topic
        - managedResource: book.aci.cisco.com/v1.Publisher
          endpoint: node-topic
        - managedResource: terraform.argo.cisco.com/v1.Task
          endpoint: task-topic
    - service: agent-manager
      endpoint: agent-manager-topic
      restPort: 0.0.0.0:8089
      databaseName: agentmgr
      managedResources:
        - managedResource: terraform.argo.cisco.com/v1.Agent
          endpoint: agent-topic
        - managedResource: terraform.argo.cisco.com/v1.TokenList
          endpoint: agent-topic
    - service: organization-manager
      endpoint: organization-manager-topic
      restPort: 0.0.0.0:8089
      databaseName: organizationmgr
      managedResources:
        - managedResource: terraform.argo.cisco.com/v1.Organization
          endpoint: organizationt-topic
    - service: agentpool-manager
      endpoint: agentpool-manager-topic
      restPort: 0.0.0.0:8089
      databaseName: agentpoolmgr
      managedResources:
        - managedResource: terraform.argo.cisco.com/v1.Agentpool
          endpoint: agentpool-topic
        - managedResource: terraform.argo.cisco.com/v1.AgentpoolList
          endpoint: agentpool-topic