kind: Application
metadata:
  name: Terraform
  group: terraform.argo.cisco.com
  version: v1
spec:
  platforms:
    - platform: kind
      kafka:
        addresses: 
          - kafka-svc:9092
      mongo:
        address: mongo-svc:27017
      directory:
        service: organization-manager
        endpoint: organization-manager-directory-notifier
        databaseName: organization-manager-directory
  services:
    - service: agent-manager
      endpoint: agent-manager-topic
      restPort: 0.0.0.0:8089
      databaseName: agentmgr
      managedResources:
        - managedResource: terraform.argo.cisco.com/v1.Agent
          endpoint: agent-topic
        - managedResource: terraform.argo.cisco.com/v1.TokenList
          endpoint: agent-topic
    - service: organization-manager
      endpoint: organization-manager-topic
      restPort: 0.0.0.0:8089
      databaseName: organizationmgr
      managedResources:
        - managedResource: terraform.argo.cisco.com/v1.Organization
          endpoint: organizationt-topic
    - service: agentpool-manager
      endpoint: agentpool-manager-topic
      restPort: 0.0.0.0:8089
      databaseName: agentpoolmgr
      managedResources:
        - managedResource: terraform.argo.cisco.com/v1.Agentpool
          endpoint: agentpool-topic
        - managedResource: terraform.argo.cisco.com/v1.AgentpoolList
          endpoint: agentpool-topic